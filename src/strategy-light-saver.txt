

Let us continue to develop this node.
I want another list of entities similar to Triggers. This shall be called Lights. It shall work the exact same way as Triggers, but you can limit the list of entities to those starting with light and switch (light.* and switch.*).
Do not output anything from these yet.
Limit the list of entities for triggers to entities starting with binary_sensor.
Then I want a new list of inputs. This shall also have multiple rows, but always at least onee. If there are more than one, then any row can be deleted.
For each row there shall be two input values. One if "From time" and input here is hour and minute in the form HH:MM. Validate that it is a legal time from 00:00 to 23:59. The second input per row is Level. It shall be a number between 0 and 100 without decimals. Also validate that it is a legal number. Both fields must have a valid value.
Make it possible to add and delete rows similar to the entities for triggers and lights.
The headline for all rows is Light levels.
The input values shall be stored in a list in the js-file. Name the list levels, and each item in the list shall contain fromTime and level.
The list of triggers shall be saved in another list in the js file named triggers. Each item in the list shall contain entity_id, lastMotion and timeoutMinutes. The timeoutMinutes can have a number without decimals or it can be null or undefined. I will come back to this later. The lastMotion shall contain the last time motion was detected, that is when the state was changed (either it was going on or off). Make sure this field is updated based on the events from the triggers. (Currently you send those events to the output, but now you shall also update the lastMotion field in this list.)
The list of lights shall be saved in another list in the js file named lights.
Then I want a new input field with label Timeout. This shall accept a number without decimals. Show (minutes) after the inoput field so the user knows. Keep this number in the js-file in a field called timeoutMinutes. This is not the same as the one stored with triggers.



